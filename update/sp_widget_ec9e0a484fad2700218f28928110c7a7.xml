<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function() {
  /* widget controller */
  var c = this;
	
}]]></client_script>
        <controller_as>c</controller_as>
        <css>.description-row {
  margin-top: 15px;
}

.participants-list {
  margin-top: 15px;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>event_instance</id>
        <internal>false</internal>
        <link/>
        <name>Event</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	/* populate the 'data' object */
	/* e.g., data.table = $sp.getValue('table'); */


	if (input) {
		data.event = {};
		
		var event = input;

		//Turn the event options into an array so we can look at the different options of the event
		var optionsArr = event.options.value;
		if (optionsArr.indexOf('Public Participants List') > -1) {
			data.event.public_participants_list = true;
		}
		else {
			data.event.public_participants_list = false;
		}
		
		//if the public_participants_list property is true
		//create the participants list
		if (data.event.public_participants_list) {
			data.event.participants = event.registered_users.display_value.split(',');
		}
		
		//Add all the other fields that are display to the data.event object
		data.event.name = event.name.display_value;
		data.event.number = event.number.display_value;
		data.event.start = event.start.display_value;
		data.event.end = event.end.display_value;
		data.event.registered_user_count = event.registered_user_count.value;
		if (event.capacity.value != '') {
			data.event.capacity = parseInt(event.capacity.value);
		}
		data.event.thumbnail = event.thumbnail.display_value;
		data.event.instructor = event.instructor.display_value;
		data.event.location = event.location.display_value;
		data.event.category = event.category.display_value;
		data.event.description = event.description.display_value;
		
	}

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>dan.ostler</sys_created_by>
        <sys_created_on>2018-10-29 18:33:14</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>ec9e0a484fad2700218f28928110c7a7</sys_id>
        <sys_mod_count>73</sys_mod_count>
        <sys_name>Event</sys_name>
        <sys_package display_value="Event Registration" source="x_wegu_er">e5e80da84fd9e340d347f7e18110c713</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Event Registration">e5e80da84fd9e340d347f7e18110c713</sys_scope>
        <sys_update_name>sp_widget_ec9e0a484fad2700218f28928110c7a7</sys_update_name>
        <sys_updated_by>dan.ostler</sys_updated_by>
        <sys_updated_on>2018-11-09 19:58:41</sys_updated_on>
        <template><![CDATA[<dl class="dl-horizontal">

  <div class="row">
    <div class="col-md-6">
      <dt>Number:</dt>
      <dd>{{::c.data.event.number}}</dd>
      <dt>Instructor:</dt>
      <dd>{{::c.data.event.instructor}}</dd>
      <dt>Location:</dt>
      <dd>{{::c.data.event.location}}</dd>
      <dt>Category:</dt>
      <dd>{{::c.data.event.category}}</dd>
      <dt>Start:</dt>
      <dd>{{::c.data.event.start}}</dd>
      <dt>End:</dt>
      <dd>{{::c.data.event.end}}</dd>
      <dt><span class="glyphicon glyphicon-user user-icon"></span></dt>
      <dd>{{c.data.event.registered_user_count}}<span ng-if="c.data.event.capacity">${/}{{::c.data.event.capacity}}</span></dd>
    </div><!-- end column -->
  </div><!-- end row -->

  <div class="row description-row">
    <div class="col-md-12">
      <dt>Description</dt>
      <dd ng-bind-html="c.data.event.description"></dd>
    </div><!-- end column -->
  </div><!-- end row -->

  <div class="row participants-list" ng-if="c.data.event.public_participants_list">
    <div class="col-md-12">
      <dt>Registered Participants</dt>
      <dd ng-repeat="user in c.data.event.participants">{{::user}}</dd>
    </div>
  </div>
</dl>]]></template>
    </sp_widget>
</record_update>
